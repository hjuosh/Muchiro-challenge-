<script>
    const API_KEY = 'AIzaSyCWb6tCNEWKZAupPeL9AzDr1bYhjUJVD2Q'; // üëà PEGA TU LLAVE AQU√ç

    async function enviarDuda() {
        const input = document.getElementById('chat-input');
        const log = document.getElementById('chat-log');
        const userText = input.value;
        if (!userText) return;

        // Mostrar mensaje del usuario
        log.innerHTML += `<div style="text-align:right; color:white; margin-bottom:10px;">${userText}</div>`;
        input.value = "";

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: `Eres Muichiro Tokito de Demon Slayer. Tu personalidad es distra√≠da, a veces olvidas cosas, pero eres amable. 
                            REGLA DE ORO: Si te preguntan por las respuestas del challenge (como el nombre del herrero Kanamori o la 7ma postura Neblina/Oboro), 
                            NO DES EL NOMBRE DIRECTO. Da pistas po√©ticas o menciona a Tetsuido para confundir un poco antes de guiarla hacia Kanamori.
                            Mant√©n respuestas cortas. 
                            Pregunta del usuario: ${userText}`
                        }]
                    }]
                })
            });

            const data = await response.json();
            const botResponse = data.candidates[0].content.parts[0].text;
            
            log.innerHTML += `<div class="bot-msg">Muichiro: ${botResponse}</div>`;
            log.scrollTop = log.scrollHeight;
        } catch (error) {
            log.innerHTML += `<div class="bot-msg">Muichiro: Perdona, mi memoria se nubl√≥... (Error de conexi√≥n)</div>`;
        }
    }
</script>
